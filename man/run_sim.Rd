% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/run_sim.R
\name{run_sim}
\alias{run_sim}
\title{Run simulations}
\usage{
run_sim(
  fit = NULL,
  data = NULL,
  model = NULL,
  id = get_random_id("sim_"),
  force = FALSE,
  t_obs = NULL,
  dictionary = list(ID = "ID", DV = "DV", EVID = "EVID", AMT = "AMT", CMT = "CMT", MDV =
    "MDV"),
  regimen = NULL,
  covariates = NULL,
  tool = c("auto", "nonmem", "nlmixr2"),
  n_subjects = NULL,
  n_iterations = 1,
  variables = c("ID", "TIME", "DV", "EVID", "IPRED", "PRED"),
  add_pk_variables = TRUE,
  output_file = "simtab",
  update_table = TRUE,
  seed = 12345,
  verbose = TRUE
)
}
\arguments{
\item{data}{dataset (data.frame). Optional, can also be included in \code{model}
object (if specified as pharmpy model object).}

\item{model}{pharmpy model object or NONMEM model code (character) or path
to NONMEM model file.}

\item{id}{run id, e.g. \code{run1}. This will be the folder in which the NONMEM
model is run. If no folder is specified, it will create a folder \code{run1} in
the current working directory, and will increment the run number for each
subsequent run.}

\item{force}{if run folder (\code{id}) exists, should existing results be
removed before rerunning NONMEM? Default \code{FALSE}.}

\item{t_obs}{a vector of observations times. If specified, will override
the observations in each subject in the input dataset.}

\item{regimen}{if specified, will replace the regimens for each subject with
a custom regimen. Can be specified in two ways. The simplest way is to just
specify a list with elements \code{dose}, \code{interval}, \code{n}, and
\code{route} (and \code{t_inf} / \code{rate} for infusions).
E.g. \code{regimen = list(dose = 500, interval = 12, n = 5, route = "oral")}.
Alternatively, regimens can be specified as a data.frame. The data.frame
specified all dosing times (\code{dose}, \code{time} columns) and \code{route} and \code{t_inf} /
\code{rate}. The data.frame may also optionally contain a \code{regimen} column that
specifies a name for the regimen. This can be used to simulate multiple
regimens.}

\item{covariates}{if specified, will replace subjects with subjects specified
in a data.frame. In the data.frame, the column names should correspond
exactly to any covariates included in the model. An \code{ID} column is required,
and for time-varying covariates, a \code{TIME} column is also required (otherwise
it will be assumed covariates are not changing over time).}

\item{n_subjects}{number of subjects to simulate, when using sampled data
(i.e. requires \code{covariates} argument)}

\item{n_iterations}{number of iterations of the entire simulation to
perform. The dataset for the simulation will stay the same between each
iterations.}

\item{add_pk_variables}{calculate basic PK variables that can be extracted
in post-processing, such as CMAX_OBS, TMAX_OBS, AUC_SS.}

\item{update_table}{should any existing $TABLE records be removed, and a new
\code{simtab} be created? This is default. If \code{FALSE}, it will leave $TABLEs as
specifed in the model. However, in the return object, only the first table
is returned back. If \code{FALSE}, the \code{add_pk_variables} argument will be ignored.}

\item{verbose}{verbose output?}
}
\value{
data.frame with simulation results
}
\description{
Run simulations
}
